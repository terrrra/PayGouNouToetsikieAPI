# PayGate .Net Test
### Overview
The aim of this test is to determine how compitent one is with regard to building a .Net apllication using good practices and proper architecture. In this excersise you will be building a REST Web API using the .Net Core 3 framework. You will not be required to build an interface/front end - all endpoints will be tested using an API Client (Postman, Insomnia).

### Boiler Plate
You do not need to start with a new project: within this git repository is an existing .Net Core Web API application with a single controller, `HealthController` that has a single `Get` Action called `ping` to check server status. Everything else required (startup file & configuration) has been created and one can just add more Controllers and Actions.

### Data Access
Throughout the application you will require acces to a database in order to persist and alter various entities. A MSSQL Database Schema will be provided to you for the database scructure and tables (`create-database-tables.sql`), but feel free to recreate the tables and relationship in MySQL if you are more comforatble with that. It is also then a given that you will need to build in Entity Framework into your application or any other flavor of ORM that prefer to work with in .Net.

### Scernario
You will be building a very simple banking system with customers, accounts and transactions. You will be able to manage customers, manage accounts for said customers and action transactions for customers that will alter their account balances. Look at the ERD below to inspect the entities and their relationships:

![ERD](https://i.imgur.com/nuvLYvT.png "ERD")

**Notes:** Most of the fields in the given ERD is quite intuitive, but to avoid ambiguity or confusion, note the following:
- The `Type` field in the `Transaction` Table should always either be `'CR'` (Credit) or `'DB'` (Debit).
- The `Account` Table acts as a base account enitity that a bank might offer a customer, i.e. the `Type` field would be `'Savings'` or `'Bond'` etc.
- The `Customer_Account` Table is to create an tie an account to an customer - also take note that the `Name` field will act as an alias for the customer for example `'My Car Savings Account'`

### Architecture
Within the project you will notice a BLL and DAL folder, reserved for Business Logic Layers and Data Access Layers. Each Data Entity should have its own DAL class to perform basic `CRUD` (Create, Read, Update & Delete) as well as any other required operations to complete a business operation. Then Also create a BLL Class for every entity - this is the heart of where the functionality for the API will reside. For example: When a requests comes along to get a customer transaction report, one would have to create a single BLL method that will access both the Customer and Transaction DAL, compile the data into a single object and return it. 

## The Test

### API Specification
At the end of this test you would have had to create the following endpoints delivering the following result:

| REST Path                                        | Type   | Description                                                                                                                                     | Input                                                                                                                                                                                                                                                                                                          | Result                                                                                    |
|--------------------------------------------------|--------|-------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------|
| `api/customer/find?id=X`                         | `GET`  | Get information about a particular customer                                                                                                     | Customer ID as URL Parameter `id`                                                                                                                                                                                                                                                                              | JSON object of the customer details                                                       |
| `api/customer/create`                            | `POST` | Add a new customer to the customer table                                                                                                        | A JSON object with all the required fields for a customer table entry.                                                                                                                                                                                                                                         | A result message to indicate if the operation was successful                              |
| `api/customer/update`                            | `PUT`  | Update a particular Customer's details.                                                                                                         | A JSON object specifying fields of the customer you want to update as well as the  customer to update's ID - If a field is not supplied in the request, handle that in the back end  to not update that particular field                                                                                       | A result message to indicate if the operation was successful                              |
| `api/customer/state`                             | `PUT`  | Set a particular customer's account as disabled/enabled by setting the `Active` field to `false`                                                | A JSON object specifying the customer's ID as well as the state to set the customer entry to.                                                                                                                                                                                                                  | A result message to indicate if the operation was successful                              |
| `api/account/create`                             | `POST` | Create a new base bank account type.                                                                                                            | A JSON object specifying the account Type (Name like `'Savings`, `'Bond'` etc.) and  Monthly Fee in decimal notation                                                                                                                                                                                           | A result message to indicate if the operation was successful                              |
| `api/account/list`                               | `GET`  | Get a list of all base accounts available.                                                                                                      | None required                                                                                                                                                                                                                                                                                                  | A JSON object contain an array of account objects.                                        |
| `api/customer/account/create`                    | `POST` | Creat an account for a specified customer                                                                                                       | A JSON object specifying all required field for an entry in the `Customer_Account` table.                                                                                                                                                                                                                      | A result message to indicate if the operation was successful                              |
| `api/customer/account/list?id=X`                 | `GET`  | Get a list of all accounts for a specified customer.                                                                                            | Customer ID as URL Parameter `id`                                                                                                                                                                                                                                                                              | A JSON object contain an array their accounts as objects.                                 |
| `api/transaction/create`                         | `POST` | Create `Debit` or `Credit` transaction for a particular customer, which should either increase or decrease the balance of the specified account | A JSON object with a property `transaction` containing all the required fields for a transaction table entry. Then another 2 fields `account_id` and `customer_id` to contain the IDs of the customer and account to link the transaction to. Note for the transaction `Type` field only use `'DB'` or `'CR'`. |                                                                                           |
| `api/customer/report?customer_id=X&account_id=X` | `GET`  | Get all the transactions for a particular customer & specified account as well as the customer's details                                        | Customer ID as URL Parameter `customer_id` and Account ID as URL Parameter `account_id`                                                                                                                                                                                                                        | JSON object with two properties: `customer`(Object) and `transactions` (Array of Objects) |

**Bonus Points:** Attention to detail goes a long way - If you can find the time to do proper joins on the tables and include aliases for fields where approrpiate it wil not go unoticed.
